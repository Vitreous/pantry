<!DOCTYPE html>
<html>
<head>

  <!-- Latest compiled and minified CSS -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/css/bootstrap.min.css">
  <!-- jQuery library -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <!-- Latest compiled JavaScript -->
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/js/bootstrap.min.js"></script>

  <script>
    $(document).ready(function(){
        $.ajax({
          url: '/api/items',
          type: 'GET',
          //data: 'page=' + btn_page,
            success: function (itemResponse) {
              //TODO Account for quantity
              //Creates a list for items
              var itemList =[];
              for (var i = 0;i < itemResponse.items.length; i++) {
                itemList.push(itemResponse.items[i].name);
              }
              $.ajax({
                    url: '/api/recipes',
                    type: 'GET',
                    //data: 'page=' + a,
                    success: function (recipes) {
                      var webtxt = "";
                      for (var i = 0;i < recipes.recipes.length; i++) {
                        webtxt += "<h4><b>" + recipes.recipes[i].name + "</b></h4>";
                        var flag = true;
                        for(var j = 0; j < recipes.recipes[i].ingredients.length; j++) {
                          //console.log(recipes.recipes[i].ingredients[j]);

                          if(!itemList.includes(recipes.recipes[i].ingredients[j])){
                            //console.log("Do not have " + recipes.recipes[i].ingredients[j]);
                            flag = false;
                            };
                          };

                          if(!flag){
                            webtxt += "You cannot cook " + recipes.recipes[i].name
                          } else {
                            webtxt += "You can cook " + recipes.recipes[i].name
                          }
                          webtxt += "<br/><button type=\"button\" onClick=\"cookRecipe(\'" + recipes.recipes[i]._id + "\')\">Cook Me</button>"
                      }
                      $("#display").html(webtxt);
                    }
                });
            }
          });

        $.ajax({
          url: '/api/recipes',
          type: 'GET',
          success: function(response){    // response contains json object in i
              var Options = "";
              for(var i = 0;i < response.recipes.length; i++) {
                Options += "<p><h4>" + response.recipes[i].name + "</h4>" +
                "<b>Ingredients</b><ul>";
                for(var j = 0; j < response.recipes[i].ingredients.length; j++) {
                  Options += "<li>" + response.recipes[i].ingredients[j] + "</li>";
                };
                Options += "</ul></p><hr/>"
              };
              $("#recipes").html(Options);
              }
          });
      });

      function cookRecipe(value){
        $.ajax({
          url: '/api/recipe/' + value,
          type: 'GET',
          success: function(response){    // response contains json object in i
              var itemList = response.recipe.ingredients
              $.ajax({
                url: '/api/items',
                type: 'GET',
                success: function(response){
                    for(var i = 0;i < response.items.length; i++) {
                      if(itemList.includes(response.items[i].name)){
                        $.ajax({
                          url: '/api/items/' + response.items[i]._id,
                          type: 'DELETE',
                          success: function(response){}
                          });
                        }
                      };
                    }
                });
                document.location.reload();
              }
          });
      };

</script>
</head>

<body>

<%- include('partials/header'); %>

<h2>Welcome <%= user.name %></h2>

<h2>Index | What you can't cook now</h2>

<hr />

<div>
  <span id="display">
  </span>
</div>

<table class="table table-bordered table-dark table-striped" id="test">

</table>

40 | 55 Hours <br/>

<hr/>

Development CI/CD</br></br>

<ul>

  <li><i><b>Extra</b></i></li>

  <li><i>9am - 9.30am</i></li>
  <li>Document</li>

  <li><i>1.30pm - 2pm</i></li>
  <li>Bootstrap</li>

  <li><i>2pm - 2.30pm</i></li>
  <li>Bootstrap</li>

  <li><i>2.30pm - 3pm</i></li>
  <li>Bootstrap</li>

  <li><i><b>Saturday</b></i></li>

  <li><i>2.30pm - 3pm</i></li>
  <li>Test Automation</li>

  <li><i>3pm - 3.30pm</i></li>
  <li>Unique ID</li>

  <li><i>3.30pm - 4pm</i></li>
  <li>Unique ID</li>

  <li><i>4pm - 4.30pm</i></li>
  <li>MongoDB Redesign</li>

  <li><i>4.30pm - 5pm</i></li>
  <li>MongoDB Redesign</li>

  <li><i>5pm - 5.30pm</i></li>
  <li>Recipe D</li>

  <li><i>5.30pm - 6pm</i></li>
  <li>Recipe D</li>

  <li><i>6pm - 6.30pm</i></li>
  <li>Items U</li>

  <li><i><b>6.30pm - 7pm Gap</b></i></li>

  <li><i>7pm - 7.30pm</i></li>
  <li>CI / CD</li>

  <li><i>7.30pm - 8pm</i></li>
  <li>Document</li>

  <li><i>8pm - 8.30pm</i></li>
  <li>Document</li>

  <li><i>8.30pm - 9pm</i></li>
  <li>Document</li>

  <li><i>9pm - 9.30pm</i></li>
  <li>Document</li>

  <li><i>9.30pm - 10pm</i></li>
  <li>Document</li>





  <li><i><b>Sunday</b></i></li>

  <li><i>2.30pm - 3pm</i></li>
  <li>Document</li>

  <li><i>3pm - 3.30pm</i></li>
  <li>Document</li>

  <li><i>3.30pm - 4pm</i></li>
  <li>Document</li>

  <li><i>4pm - 4.30pm</i></li>
  <li>Document</li>

  <li><i>4.30pm - 5pm</i></li>
  <li>Document</li>

  <li><i>5pm - 5.30pm</i></li>
  <li>Document</li>

  <li><i>5.30pm - 6pm</i></li>
  <li>Document</li>

  <li><i>6pm - 6.30pm</i></li>
  <li>Document</li>

  <li><i>6.30pm - 7pm</i></li>
  <li>Document</li>

  <li><i>7pm - 7.30pm</i></li>
  <li>Document</li>

  <li><i><b>7.30pm - 8pm Gap</b></i></li>

  <li><i>8pm - 8.30pm</i></li>
  <li>CI/CD</li>

  <li><i>8.30pm - 9pm</i></li>
  <li>CI/CD</li>

  <li><i>9pm - 9.30pm</i></li>
  <li>Presentation Ideas</li>

</ul>

Report docs.google.com</br></br>

<ul>

  <li><b>10 Hr Plan           </b></li>
  <li><b>Items Page           </b></li>
  <li><b>Recipe Page 2 Hours  </b></li>
  <li><b>HomePage formula 1.5Hrs </b></li>
  <li><b>Login 2.5Hr            </b></li>
  <li><b>1 Hour Meeting Prep </b></li>
  <li><b>20 Hr Plan           </b></li>
  <li><b>Cognito Research     </b></li>
  <li><b>Delete Functionality of items </b></li>
  <li><b>Code Cleanup</b></li>
  <li><b>CookRecipe Function 1.Hrs</b></li>
  <li><b>Jenkins Webhooks</b></li>
  <li><b>Jenkins Webhook troubleshooting</b></li>
  <li><b>Jenkins SSH configuration</b></li>
  <li><b>Jenkins 8.5Hrs configuration</b></li>
  <li><b>git branch set up</b></li>
  <li><b>CookRecipe function 1.5Hr</b></li>
  <li><b>Login 1/4 AWS Amplify</b></li>
  <li><b>Login 2/4 AWS Amplify</b></li>
  <li><b>AWS & CI/CD & Docker 2Hr Research</b></li>
  <li><b>CodeDeploy Research</b></li>
  <li><b>Testing 1Hr</b></li>
  <li><b>Bootstrap</b></li>
  <li><b>Login UI 2 Hours</b></li>
  <li><b>Login Unique ID 1hr</b></li>
  <li><b>9Hrs Document </b></li>

  <li>55 Hour Plan</li>
  <li><b>Document</b></li>
  <li><b>Document</b></li>
  <li><b>Document</b></li>
  <li><b>Jenkins CD</b></li>
  <li><b>Meeting</b></li>

</ul>
</body>

</html>
